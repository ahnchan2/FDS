-- 카카오머니 서비스 계좌 개설 로그
CREATE TABLE `open_account_log` (
  `service_time` datetime NOT NULL,
  `user_id` int NOT NULL,
  `account_number` varchar(30) NOT NULL,
  key `idx_open_account_log` (`service_time`, `user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (TO_DAYS(`service_time`))
(PARTITION p20180311 VALUES LESS THAN (TO_DAYS('2018-03-12')) ENGINE = InnoDB,
PARTITION p20180312 VALUES LESS THAN (TO_DAYS('2018-03-13')) ENGINE = InnoDB,
PARTITION p20180313 VALUES LESS THAN (TO_DAYS('2018-03-14')) ENGINE = InnoDB,
PARTITION p20180314 VALUES LESS THAN (TO_DAYS('2018-03-15')) ENGINE = InnoDB,
PARTITION p20180315 VALUES LESS THAN (TO_DAYS('2018-03-16')) ENGINE = InnoDB,
PARTITION p20180316 VALUES LESS THAN (TO_DAYS('2018-03-17')) ENGINE = InnoDB,
PARTITION p20180317 VALUES LESS THAN (TO_DAYS('2018-03-18')) ENGINE = InnoDB,
PARTITION p20180318 VALUES LESS THAN (TO_DAYS('2018-03-19')) ENGINE = InnoDB,
PARTITION p20180319 VALUES LESS THAN (TO_DAYS('2018-03-20')) ENGINE = InnoDB,
PARTITION p20180320 VALUES LESS THAN (TO_DAYS('2018-03-21')) ENGINE = InnoDB) */;


-- 카카오머니 송금 로그
CREATE TABLE `send_money_log` (
  `service_time` datetime NOT NULL,
  `sender_id` int NOT NULL,
  `sender_account_number` varchar(30) NOT NULL,
  `sender_balance_before_send` bigint NOT NULL,
  `receiver_account_number` varchar(30) NOT NULL,
  `receiver_id` int NOT NULL,
  `send_amount` bigint NOT NULL,
  key `idx_send_money_log` (`service_time`, `sender_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (TO_DAYS(`service_time`))
(PARTITION p20180311 VALUES LESS THAN (TO_DAYS('2018-03-12')) ENGINE = InnoDB,
PARTITION p20180312 VALUES LESS THAN (TO_DAYS('2018-03-13')) ENGINE = InnoDB,
PARTITION p20180313 VALUES LESS THAN (TO_DAYS('2018-03-14')) ENGINE = InnoDB,
PARTITION p20180314 VALUES LESS THAN (TO_DAYS('2018-03-15')) ENGINE = InnoDB,
PARTITION p20180315 VALUES LESS THAN (TO_DAYS('2018-03-16')) ENGINE = InnoDB,
PARTITION p20180316 VALUES LESS THAN (TO_DAYS('2018-03-17')) ENGINE = InnoDB,
PARTITION p20180317 VALUES LESS THAN (TO_DAYS('2018-03-18')) ENGINE = InnoDB,
PARTITION p20180318 VALUES LESS THAN (TO_DAYS('2018-03-19')) ENGINE = InnoDB,
PARTITION p20180319 VALUES LESS THAN (TO_DAYS('2018-03-20')) ENGINE = InnoDB,
PARTITION p20180320 VALUES LESS THAN (TO_DAYS('2018-03-21')) ENGINE = InnoDB) */;


-- 카카오머니 충전 로그 (은행계좌에서 머니 충전)
CREATE TABLE `charge_money_log` (
  `service_time` datetime NOT NULL,
  `user_id` int NOT NULL,
  `account_number` varchar(30) NOT NULL,
  `charge_amount` bigint NOT NULL,
  `bank_account_number` varchar(30) NOT NULL,
  key `idx_charge_money_log` (`service_time`, `user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (TO_DAYS(`service_time`))
(PARTITION p20180311 VALUES LESS THAN (TO_DAYS('2018-03-12')) ENGINE = InnoDB,
PARTITION p20180312 VALUES LESS THAN (TO_DAYS('2018-03-13')) ENGINE = InnoDB,
PARTITION p20180313 VALUES LESS THAN (TO_DAYS('2018-03-14')) ENGINE = InnoDB,
PARTITION p20180314 VALUES LESS THAN (TO_DAYS('2018-03-15')) ENGINE = InnoDB,
PARTITION p20180315 VALUES LESS THAN (TO_DAYS('2018-03-16')) ENGINE = InnoDB,
PARTITION p20180316 VALUES LESS THAN (TO_DAYS('2018-03-17')) ENGINE = InnoDB,
PARTITION p20180317 VALUES LESS THAN (TO_DAYS('2018-03-18')) ENGINE = InnoDB,
PARTITION p20180318 VALUES LESS THAN (TO_DAYS('2018-03-19')) ENGINE = InnoDB,
PARTITION p20180319 VALUES LESS THAN (TO_DAYS('2018-03-20')) ENGINE = InnoDB,
PARTITION p20180320 VALUES LESS THAN (TO_DAYS('2018-03-21')) ENGINE = InnoDB) */;


-- 카카오머니 받기 로그
CREATE TABLE `receive_money_log` (
  `service_time` datetime NOT NULL,
  `receiver_id` int NOT NULL,
  `receiver_account_number` varchar(30) NOT NULL,
  `receiver_balance_before_receive` bigint NOT NULL,
  `sender_account_number` varchar(30) NOT NULL,
  `sender_id` int NOT NULL,
  `receive_amount` bigint NOT NULL,
  key `idx_receive_money_log` (`service_time`, `receiver_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (TO_DAYS(`service_time`))
(PARTITION p20180311 VALUES LESS THAN (TO_DAYS('2018-03-12')) ENGINE = InnoDB,
PARTITION p20180312 VALUES LESS THAN (TO_DAYS('2018-03-13')) ENGINE = InnoDB,
PARTITION p20180313 VALUES LESS THAN (TO_DAYS('2018-03-14')) ENGINE = InnoDB,
PARTITION p20180314 VALUES LESS THAN (TO_DAYS('2018-03-15')) ENGINE = InnoDB,
PARTITION p20180315 VALUES LESS THAN (TO_DAYS('2018-03-16')) ENGINE = InnoDB,
PARTITION p20180316 VALUES LESS THAN (TO_DAYS('2018-03-17')) ENGINE = InnoDB,
PARTITION p20180317 VALUES LESS THAN (TO_DAYS('2018-03-18')) ENGINE = InnoDB,
PARTITION p20180318 VALUES LESS THAN (TO_DAYS('2018-03-19')) ENGINE = InnoDB,
PARTITION p20180319 VALUES LESS THAN (TO_DAYS('2018-03-20')) ENGINE = InnoDB,
PARTITION p20180320 VALUES LESS THAN (TO_DAYS('2018-03-21')) ENGINE = InnoDB) */;


-- 파티션 확인
SELECT TABLE_SCHEMA, TABLE_NAME, PARTITION_NAME, PARTITION_ORDINAL_POSITION, TABLE_ROWS
FROM INFORMATION_SCHEMA.PARTITIONS
WHERE TABLE_NAME =  'open_account_log';